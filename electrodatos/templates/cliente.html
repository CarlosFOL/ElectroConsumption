{% extends "disposicion.html" %}
{% block content %}

<div class="contenido">
    <h1>Hola, cliente nº {{ cliente }}</h1>
    <hr>
    <p>Tu consumo en {{ year}}</p>
    <script src="/api/consumo/rango?cliente={{ cliente }}&inicio=2022-07-01&fin=2022-07-02"></script>
    <div>
        <canvas id="anual"></canvas>
    </div>

    <p>Comparación del consumo por meses con respecto al año anterior</p>
    <div>
        <canvas id="meses"></canvas>
    </div>

    <p>Comparación del consumo según la hora del día</p>
    <div style="width: 50%;">
        <canvas id="horario""></canvas>
    </div>
    <script>
    const anual = document.getElementById('anual');
    const meses = document.getElementById('meses');
    const horario = document.getElementById('horario');

    // Gráfico con el consumo del último año
    new Chart(anual, {
    type: 'line',
    data: {
        labels: fechas,
        datasets: [{ label: 'kWh', data: datos, borderWidth: 1 }]
    },
    options: { scales: { y: { beginAtZero: true } } }
    });

    // Gráfico con la comparación por meses
    new Chart(meses, {
    type: 'bar',
    data: {
        labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
        datasets: [{
            label: '% 2022',
            data: [0.5, 0.5, 1, .25, 2.5, 3, 2, 2, 3, 1.5, 3, 3, .5],
            borderWidth: 1
        },
        {
            label: '%2023',
            data: [1, .5, 1.5, .5, 2, 2.5, 2, 2.5, 1.5, 2.5, 3, 4, 1.5, .75],
            borderWidth: 1
        }]
    },
    options: { scales: { y: { beginAtZero: true } } }
    });

    new Chart(horario, {
    type: 'radar',
    data: {
        labels: ['12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00', '00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00', '11:00'],
        datasets: [{
            label: 'kWh',
            data: [0.211, 0.182, 0.228, 0.151, 0.192, 0.194, 0.221, 0.327, 0.341, 0.233, 0.237, 0.274, 0.216, 0.1, 0.073, 0.083, 0.073, 0.073, 0.078, 0.077, 0.076, 0.479, 0.214, 0.2],
            borderWidth: 1
        },
        ]
    },
    });
    </script>
</div>

{% endblock content %}
